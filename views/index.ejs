<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>All Listings</title>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
  />
  <link rel="stylesheet" href="/style.css">
  <style>
      .form-switch .form-check-input:checked {
        background-color: #ff4f8b;   /* WanderLust pink */
        border-color: #ff4f8b;
      }

      .form-switch .form-check-input:focus {
        box-shadow: 0 0 0 0.15rem rgba(255, 79, 139, 0.35);
      }
      .tax-info{
        color: rgb(66, 65, 65);
        display: inline;
      }
  </style>

</head>
<body>
  <%- include('parts/navbar.ejs') %>
  <div class="container">
    <% if(msgS && msgS.length > 0) { %>
    <div class="alert alert-success alert-dismissible fade show" role="alert">
      <%= msgS %>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    <% } %>
    <% if(msgE && msgE.length > 0) { %>
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
      <%= msgE %>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    <% } %>
    <!-- <% if (currUser) { %>
      <div class="mb-3 text-muted">
        Logged in as <strong><%= currUser.username %></strong>
      </div>
    <% } %> -->

    <!-- <h2>Available Listings</h2> -->
<div class="container">
    <div class="filters-wrapper">
      <button class="scroll-btn left" id="scrollLeftBtn">
        <i class="fas fa-chevron-left"></i>
      </button>

      <div class="filters-container">
        <div class="filters" id="filters">
          <div class="filter active">
            <i class="fas fa-fire"></i>
            <a href="/listing/trending" style="text-decoration:none; color:inherit;"><span>Trending</span></a>
          </div>
          <div class="filter">
            <i class="fas fa-water"></i>
            <a href="/listing/lakefront" style="text-decoration:none; color:inherit;"><span>Lakefront</span></a>
          </div>
          <div class="filter">
            <i class="fas fa-house"></i>
            <a href="/listing/tinyhome" style="text-decoration:none; color:inherit;"><span>Tiny Homes</span></a>
          </div>
          <div class="filter">
            <i class="fas fa-tree"></i>
            <a href="/listing/treehouse" style="text-decoration:none; color:inherit;"><span>Tree House</span></a>
          </div>
          <div class="filter">
            <i class="fas fa-mountain-sun"></i>
            <a href="/listing/contryside" style="text-decoration:none; color:inherit;"><span>Contryside</span></a>
          </div>
          <div class="filter">
            <i class="fas fa-landmark"></i>
            <a href="/listing/historical" style="text-decoration:none; color:inherit;"><span>Historical</span></a>
          </div>
          <div class="filter">
            <i class="fas fa-umbrella-beach"></i>
            <a href="/listing/beachfront" style="text-decoration:none; color:inherit;"><span>Beach Front</span></a>
          </div>
          <div class="filter">
            <i class="fas fa-umbrella"></i>
            <a href="/listing/tropical" style="text-decoration:none; color:inherit;"><span>Tropical</span></a>
          </div>
          <div class="filter">
            <i class="fas fa-bed"></i>
            <a href="/listing/lux" style="text-decoration:none; color:inherit;"><span>Luxe</span></a>
          </div>
          <div class="filter">
            <i class="fas fa-wine-glass"></i>
            <a href="/listing/vineyards" style="text-decoration:none; color:inherit;"><span>Vineyards</span></a>
          </div>
        </div>
      </div>
      <button class="scroll-btn right" id="scrollRightBtn">
        <i class="fas fa-chevron-right"></i>
      </button>
    </div>
    <div class="form-check form-switch">
        <input class="form-check-input" type="checkbox" role="switch" id="switchCheckDefault">
        <label class="form-check-label" for="switchCheckDefault"><b>Display Total After Taxs</b></label>
    </div>
    <br>
    <div class="listings-grid">
      <% allListings.forEach(list => { %>
        <div class="card">
          <img 
          src="<%= list.image.url %>" 
          alt="<%= list.title %>">
          <div class="card-body">
            <a href="/listing/show/<%= list.id %>" class="show"><h3><b><%= list.title %></b></h3></a>
            <p class="location"><%= list.location %>, <%= list.country %></p>
            <p class="desc"><%= list.description %></p>
            <p class="price">
                <span class="base-price">
                  ₹<%= list.price.toLocaleString("en-IN") %> / night
                </span>

                <span class="tax-price" style="display:none;">
                  ₹<%= (list.price * 1.18).toLocaleString("en-IN") %> / night
                </span>

                <i class="tax-info">&nbsp &nbsp +18% GST</i>
            </p>
          </div>
        </div>
      <% }) %>
    </div>
  </div>

  <footer>
    <p>© 2025 Wanderlust | Designed with ❤ by Arijeet</p>
  </footer>
 <script src="/script.js"></script>

</body>
</html>